First compile the so file:

gcc -m32 -c essfunc.c
gcc -m32 -shared essfunc.o -o libessfunc.so

Now compile the main program:

gcc.exe vulnserver.c -o vulnserver.exe -lws2_32 ./libessfunc.so


